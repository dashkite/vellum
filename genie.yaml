presets:
  coffeescript:
    targets:
      browser:
        - preset: browser
          glob:
            - src/**/*.coffee
        - preset: browser
          glob:
            - test/client/**/*.coffee
          options:
            mode: debug
        - preset: node
          glob:
            - test/**/*.coffee
            - '!test/client/**/*.coffee'
  verify: null
  update: null
  release: null
  esm: null
  browser:
    logging: false
    fallback: ./build/browser/test/client/index.html
  server:
    directory: .
    fallback: ./build/browser/test/client/index.html
    port: 8003
    logging: false
  pug:
    targets:
      app:
        - preset: render
          glob: src/index.pug
          document: true
        - preset: compile
          glob:
            - src/**/*.pug
            - '!src/index.pug'
      test:
        - preset: render
          glob: test/client/index.pug
          document: true
          options:
            import-map:
              '@dashkite/amen': latest
              '@dashkite/assert': latest
  stylus:
    targets:
      browser:
        - preset: css
          glob: src/index.styl
        - preset: js
          glob:
            - src/**/*.styl
            - '!src/index.styl'
  media:
    sprites:
      glob: src/media/images/sprites/*.svg
      target: src/media/images/sprites.svg
